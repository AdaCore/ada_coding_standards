# Flag if Jorvik Profile is not used

import stdlib

@memoize
fun find_profile(profile) =
    (select first p@Pragma when p.f_id.p_name_is("Profile") and 
	                      p.f_args[1].p_assoc_expr() is 
						  e@Expr and e.p_name_is(profile)) == null
	
@check(message="Jorvik profile not used")
fun uses_jorvik_profile(node) =
    node is CompilationUnit
    when find_profile("Jorvik")
